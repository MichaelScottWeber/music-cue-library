<% include ../partials/header %>

<div class="container">

  <div class="waveform-container">
    <h1 class="song-title"><%= song.title %></h1>
    <div id="waveform" class=""></div>
    <div class="show-buttons">
      <div class="time">
        <span id="current-time">0:00</span>
      </div>
      <i id="stop-button" class="audio-button fas fa-stop"></i>
      <i id="pause-button" class="audio-button fas fa-pause"></i>
      <i id="play-button" class="audio-button fas fa-play"></i>
      <i id="backward-button" class="audio-button fas fa-backward"></i>
      <i id="forward-button" class="audio-button fas fa-forward"></i>
      <div class="time">
        <span id="duration">0:00</span>
      </div>
    </div>
  </div>
  <div class="text-box-container">
    <div class="show-text-box">
      <h2>Description</h2>  
      <p><%= song.description %></p>
    </div>
    <div class="show-text-box">
      <h2>Keywords</h2>
      <p><%= song.tags %></p>
    </div>
  </div>
  <% if (currentUser) { %>
    <a href="/music/<%= song._id %>/edit">Edit Song</a>
    <form action="/music/<%= song._id %>?_method=DELETE" method="POST">
      <button>Delete</button>
    </form>
  <% } %>

</div>

<script type="text/javascript">
  var songAudio = <%- JSON.stringify(song.audio) %>;
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/2.2.0/wavesurfer.min.js"></script>

<% include ../partials/footer %>
